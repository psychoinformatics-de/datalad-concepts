#mermaid Link: https://www.mermaidchart.com/app/projects/5086e8da-91bb-4771-8f23-f4a91bb3d0e2/diagrams/0b4ae839-705f-4633-9f02-3c74e2b52249/version/v0.1/edit

# Few doubts( which needs to be further modelled.
# Group is assigned/ created using a study design but group belongs to a study
# Similarly, session/ acquisition is defined/carried out based on study design but session belongs to study

id: CI
name: Investigation Schema
description: 'LinkML schema for investigation.'
prefixes:
  OBI: http://purl.obolibrary.org/obo/OBI_
  IAO: http://purl.obolibrary.org/obo/IAO_
  dlschemas: https://concepts.datalad.org/s/

enums:
  Sex:
    permissible_values:
      Male:
        description: 'Male'
      Female:
        description: 'Female'
      Other:
        description: 'Other or unspecified sex.'
  GroupType:
    permissible_values:
      Control:
        description: 'Control group (placebo or standard).'
      Treatment:
        description: 'Treatment group.'
      Experimental:
        description: 'Experimental group.'
      Cohort:
        description: 'Cohort group classification.'

  PersonRole:
    permissible_values:
      Investigator:
        description: 'Study investigator or principal investigator.'
      Clinician:
        description: 'Clinician (physician) involved in study.'
      Technician:
        description: 'Lab or study technician.'
      Participant:
        description: 'Study participant or subject.'

classes:
  Investigation:
    class_uri: OBI:0000066
    is_a: OBI:0000011  # planned_process or #dlschema:Activity
    description: 'A planned process that consists of parts: planning, study design execution, documentation and which produce conclusion(s).'
    slots:
      id:
        description: 'Unique identifier for the investigation.'
        range: string
        required: true
      name:
        description: 'Name or title of the investigation.'
        range: string
      description:
        description: 'Detailed description of the investigation.'
        range: string
      start_date:
        description: 'Start date of the investigation.'
        range: date
      end_date:
        description: 'End date of the investigation.'
        range: date


  StudyDesign:
    class_uri: IAO:0000104  # plan specification
    is_a: OBI:0000011  # planned_process
    description: 'A plan specification comprised of protocols (which may specify how and what kinds of data will be gathered) that are executed as part of an investigation and is realized during a study design execution.'
    slots:
      id:
        description: 'Unique identifier for the study design.'
        range: string
        required: true
      name:
        description: 'Name of the study design.'
        range: string
      description:
        description: 'Detailed description of the study design.'
        range: string
      study_type:  #enum Refer: https://s4be.cochrane.org/blog/2021/04/06/an-introduction-to-different-types-of-study-design/
        description: 'Type or category of study design.'
        range: string
      num_groups:
        description: 'Number of groups or cohorts in this study design.'
        range: integer
      num_sessions:
        description: 'Number of visits/acquisition in the study phase'
        range: integer
      num_subjects:
        description: 'Number of subjects in the study'
        range: integer
      group_assignment:
        description: 'Method used to assign subject to group.'

  Study:
    is_a: Investigation
    description: 'A study within an investigation, executing a specific StudyDesign.'
    slots:
      id:
        description: 'Unique identifier for the study.'
        range: string
        required: true
      name:
        description: 'Name or title of the study.'
        range: string
      description:
        description: 'Detailed description of the study.'
        range: string
      investigation:
        description: 'Investigation to which this study belongs.'
        range: Investigation
      study_design:
        description: 'StudyDesign that this study follows.'
        range: StudyDesign


  Group:
    class_uri : dlschemas:Group
    is_a : dlschemas:Agent
    description: 'A collection of individual agents. A group may itself play the role of an agent.'
    slots:
      id:
        description: 'Unique identifier for the group.'
        range: string
        required: true
      name:
        description: 'Name or label for the group.'
        range: string
      description:
        description: 'Description of the group or cohort.'
        range: string
      group_type:
        description: 'Type of group (Control, Treatment, etc.).'
        range: GroupType
      study:
        description: 'Study to which this group belongs.'
        range: Study

  Subject:
    # OBI_0000097 , this is Class: participant under investigation role
    description: 'An individual subject or participant in a study group.'
    slots:
      id:
        description: 'Unique identifier for the subject.'
        range: string
        required: true
      name:
        description: 'Name or code for the subject.'
        range: string
      enrollment_date:
        description: 'Date the subject enrolled in the study.'
        range: date
      group:
        description: 'Group or cohort to which the subject is assigned.'
        range: Group

  Session:
    description: 'A scheduled period of time during which a Subject engages with a Investigator for specific purposes related to the study'
    slots:
      id:
        description: 'Unique identifier for the session.'
        range: string
        required: true

      start_time:
        description: 'Start date/time of the session.'
        range: datetime
      end_time:
        description: 'End date/time of the session.'
        range: datetime
      subject:
        description: 'Subject who is attending this session.'
        range: Subject
      study_design:
        description: 'The study design context for this session.'
        range: StudyDesign
      site:
        description: 'Location or site where the session takes place.'
        range: dlschema:Location

  Acquisition:
    class_uri: OBI:0600008  # Acquisition
    is_a: OBI:0000011  # planned_process
    description: 'A planned process with the objective of gaining possession of an entity.' #Copied definition
    slots:
      id:
        description: 'Unique identifier for the acquisition event.'
        range: string
        required: true
      timestamp:
        description: 'Date/time when the acquisition was performed.'
        range: datetime
      session:
        description: 'Session during which this acquisition occurred.'
        range: Session
      instrument:
        description: 'Instrument or device used for the acquisition.'
        range: dlschema:Instrument
      description:
        description: 'Additional details or notes about the acquisition.'
        range: string

  Assay:
    class_uri: OBI:0000070  # Assay
    is_a: OBI:0000011  # planned_process
    description: 'A planned process that has the objective to produce information about a material entity (the evaluant) by examining it.'  #Copied ddefinition
    slots:
      id:
        description: 'Unique identifier for the assay.'
        range: string
        required: true
      name:
        description: 'Name or code for the assay.'
        range: string
      # type of assay ? not sure
      instrument:
        description: 'Instrument used to perform the assay.'
        range: dlschema:Instrument
      specimen:
        description: 'Specimen used as input for this assay.'
        range: Specimen

  Specimen:
    class_uri: OBI:0000070  # Assay
    is_a: OBI:0000011  # planned_process
    description: 'A material entity that is collected for potential use as an input upon which measurements or observations are performed.'    # Copied definition
    slots:
      id:
        description: 'Unique identifier for the specimen.'
        range: string
        required: true
      specimen_type:
        description: 'Type of specimen (e.g., blood, tissue).'
        range: string
      collected_at:
        description: 'Date/time when the specimen was collected.'
        range: datetime
      session:
        description: 'Session during which the specimen was collected.'
        range: Session
      storage_location:
        description: 'Location or container where the specimen is stored.'
        range: dlschema:Location

  Instrument:
    class_uri: OBI:0000968
    is_a : dlschema:Resource
    description: 'An instrument or device used for acquisitions or assays.'
    slots:
      id:
        description: 'Unique identifier for the instrument.'
        range: string
        required: true
      name:
        description: 'Name or model of the instrument.'
        range: string
      # May be enum for instrument type ?
      manufacturer:
        description: 'Manufacturer of the instrument.'
        range: string
      model:
        description: 'Model of the instrument.'
        range: string
      serial_number:
        description: 'Serial number of the instrument.'
        range: string
      location:
        description: 'Physical location of the instrument.'
        range: dlschema:Location

  Dataset:
    class_uri: dlschema:Dataset
    description: 'A dataset or data file produced by an assay.'  #Session data?
    slots:
      id:
        description: 'Unique identifier for the dataset.'
        range: string
        required: true
      name:
        description: 'Name or title of the dataset.'
        range: string
      description:
        description: 'Detailed description of the dataset contents.'
        range: string
      assay:  # or Acquisition?
        description: 'Assay that produced this dataset.'
        range: Assay
      modified:
        description: 'Time at which dataset was changed'
        range: datetime
      created_at:
        description: 'Time at which dataset was created'
        range: datetime
      study:
        description: 'to which study does data belongs to'
        range: Study

  Person:
    class_uri: dlschema:Person
    # Study participant will be covered under subject.
    description: 'A person involved in the investigation (e.g., investigator, technician).'
    slots:
      id:
        description: 'Unique identifier for the person.'
        range: string
        required: true
      name:
        description: 'Name of the person.'
        range: string
      role:
        description: 'Role of the person in the investigation.'
        range: PersonRole
      affiliation:
        description: 'Affiliation or organization of the person.'
        range: dlschema:Organisation
      investigation:
        description: 'Investigation in which the person is involved.'
        range: Investigation
